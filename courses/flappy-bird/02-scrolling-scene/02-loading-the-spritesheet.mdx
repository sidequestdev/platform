---
sidebar_position: 2
title: Loading the Sprite Sheet
---

# Loading the Sprite Sheet

Let's start by loading our sprite sheet image so we can draw the background.

## Image Loader

It would be convenient to use `await` to load an image. We'll create a promisifed wrapper around the image loading process to accomplish this.

:::alert{title="Image Loading Handlers" type="info"}
Be sure to set your image handlers _before_ you set the `src` attribute. Once `src` is set, the browser will start loading the image.
:::

Create a new file:

```typescript title="src/lib/asset-loaders.ts"
/**
 * Loads an image
 * @param path image URL
 */
export const loadImage = (path: string): Promise<HTMLImageElement> =>
  new Promise((resolve, reject) => {
    const image = new Image();
    image.onload = () => resolve(image);
    image.onerror = (err) => reject(err);

    // Kick off the loading process
    image.src = path;
  });
```

Now let's modify `main.ts` to load the sprite sheet:

```typescript {1,3,5} title="src/main.ts"
import spriteSheetUrl from "#/assets/image/spritesheet.png";
import { config } from "#/config";
import { loadImage } from "#/lib/asset-loader";

const spriteSheet = await loadImage(spriteSheetUrl);

const canvas = document.querySelector("canvas");
if (canvas === null) {
  throw new Error("Could not find canvas element");
}
```

:::alert{title="Importing Assets" type="info"}
If you haven't seen asset imports like `import spriteSheetUrl from "#/assets/image/spritesheet.png"` before, it might seem strange. Vite is handling this for us behind the scenes. Importing a static asset will return the resolved public URL when it is served, so we need to use this URL instead of the relative path.

See [Importing Asset as URL](https://vitejs.dev/guide/assets.html#importing-asset-as-url) from the documentation.
:::

With the sprite sheet loaded, we'll draw the background next.
